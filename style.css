/* style.css (Patch v4.6 - ìš°ìŠ¹ í™”ë©´ ì•„ë°”íƒ€ ë…ë¦½ ì •ë ¬ ìµœì¢… ìˆ˜ì •) */

/* ========================================
    ê¸°ë³¸ ì„¤ì • (Patch v3.7 - ì•ˆì •í™” ë²„ì „)
======================================== */
:root {
    --primary: #6c5ce7;
    --bg: #f0f2f5;
    --card: #ffffff;
    --nav-height: 60px;
}

body {
    font-family: 'Pretendard', -apple-system, sans-serif;
    background-color: var(--bg);
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    
    /* 100dvhì™€ fixedë¥¼ ë™ì‹œì— ì¨ì„œ í™”ë©´ì„ ê½‰ ì±„ì›ë‹ˆë‹¤ */
    position: fixed;
    width: 100%;
    height: 100%;
    height: 100dvh;
    overflow: hidden;
}

.app-container {
    width: 100%;
    max-width: 420px;
    background: var(--card);
    height: 100%;
    
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
}

/* ========================================
    DB ìƒíƒœ í‘œì‹œ
======================================== */
.db-status {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 10px;
    font-weight: bold;
    background: #e6fffa;
    border: 1px solid #00b894;
    color: #00b894;
    padding: 2px 6px;
    border-radius: 8px;
    display: none;
    z-index: 1000;
}
.db-status.on { display: block; }

/* ========================================
    í™”ë©´ (Screen) - ìŠ¤í¬ë¡¤ ì˜ì—­
======================================== */
.screen {
    display: none;
    flex-direction: column;
    
    /* ë‚¨ì€ ê³µê°„ ë‹¤ ì“°ê¸° */
    flex: 1;
    width: 100%;
    
    padding: 15px;
    
    /* [í•µì‹¬] í•˜ë‹¨ë°” ë†’ì´(60) + ì—¬ìœ (40) + ë…¸ì¹˜(env) = ë„‰ë„‰í•˜ê²Œ! */
    /* !importantë¥¼ ë¶™ì—¬ì„œ ë‹¤ë¥¸ ì„¤ì •ë³´ë‹¤ ë¬´ì¡°ê±´ ìš°ì„ ì‹œí•©ë‹ˆë‹¤ */
    padding-bottom: calc(100px + env(safe-area-inset-bottom)) !important;
    
    box-sizing: border-box;
    overflow-y: auto;
    overflow-x: hidden;
    
    /* ëª¨ë°”ì¼ í„°ì¹˜ê° ê°œì„  */
    -webkit-overflow-scrolling: touch; 
}

.screen.active { 
    display: flex; 
}

/* ========================================
    í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (Bottom Nav) - ë‹¤ì‹œ Fixedë¡œ ë³µê·€
======================================== */
.bottom-nav {
    /* [í•µì‹¬] ë‹¤ì‹œ Fixedë¡œ í™”ë©´ ë§¨ ë°‘ì— ë¶™ì´ê³  */
    position: fixed !important;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0 auto;
    max-width: 420px;
    
    width: 100%;
    height: var(--nav-height);
    
    /* ë°°ê²½ì„ í™•ì‹¤í•˜ê²Œ ì¹ í•´ì„œ ë’¤ì— ê¸€ìê°€ ì•ˆ ë¹„ì¹˜ê²Œ í•©ë‹ˆë‹¤ */
    background: rgba(255, 255, 255, 0.98); 
    border-top: 1px solid #eee;
    
    display: none;
    justify-content: space-around;
    align-items: center;
    /* Z-IndexëŠ” 50ìœ¼ë¡œ ìœ ì§€ */
    z-index: 50; /* ë©”ë‰´ë°”ëŠ” íŒì—…ë³´ë‹¤ ë‚®ê²Œ */
    
    /* ë†’ì´ ë³´ì • */
    padding-bottom: env(safe-area-inset-bottom);
    height: calc(var(--nav-height) + env(safe-area-inset-bottom));
}

.app-container.logged-in .bottom-nav { 
    display: flex !important; 
}

/* ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œ */
.nav-item {
    flex: 1;
    text-align: center;
    font-size: 11px;
    color: #b2bec3;
    cursor: pointer;
    padding: 5px 0;
    
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: var(--nav-height); /* ë†’ì´ ê³ ì • */
    
    /* PC ì»¤ì„œ */
    cursor: pointer !important;
    user-select: none;
    -webkit-user-select: none;
}

.nav-item.active {
    color: var(--primary);
    font-weight: 800;
}

/* ì•„ì´ì½˜ */
.nav-icon {
    font-size: 24px !important;
    display: block;
    margin-bottom: 2px;
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
}

.nav-item:active .nav-icon {
    transform: scale(1.4) !important;
}

/* ========================================
    ê¸°íƒ€ ì»´í¬ë„ŒíŠ¸ (ê¸°ì¡´ ìœ ì§€)
======================================== */
h1, h2, h3 { color: #2d3436; margin: 0 0 15px 0; text-align: center; }
p { color: #636e72; font-size: 15px; margin-bottom: 25px; text-align: center; }

.btn { width: 100%; padding: 15px; border: none; border-radius: 12px; font-size: 16px; font-weight: 700; cursor: pointer; margin-bottom: 10px; transition: 0.1s; }
.btn:active { transform: scale(0.98); }
.btn-kakao { background-color: #FEE500; color: #191919; }
.btn-primary { background-color: var(--primary); color: white; }
.btn-outline { background: white; border: 2px solid #dfe6e9; color: #636e72; }

.mbti-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px; }
.mbti-btn { padding: 10px 0; font-size: 13px; font-weight: bold; border: 1px solid #dfe6e9; border-radius: 8px; background: white; cursor: pointer; color: #636e72; }
.mbti-btn:active { background: var(--primary); color: white; border-color: var(--primary); }

.header-area { text-align: center; margin-bottom: 10px; }
.header-title { font-size: 22px; font-weight: 800; color: #2d3436; margin: 0; }
.header-badge { display: inline-block; background: #eee; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; color: #636e72; margin-top: 5px; }

.avatar-area { display: flex; justify-content: center; margin-bottom: 15px; }
.avatar-circle { width: 80px; height: 80px; background: #fff0f6; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 40px; border: 3px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); position: relative; }
.avatar-badge { position: absolute; bottom: 0; right: 0; background: var(--primary); color: white; font-size: 10px; padding: 3px 8px; border-radius: 10px; font-weight: bold; }

.msg-bubble { background: #f1f2f6; padding: 8px 16px; border-radius: 20px; margin-top: 10px; font-size: 13px; color: #636e72; position: relative; max-width: 80%; text-align: center; }
.msg-bubble::after { content: ''; position: absolute; top: -6px; left: 50%; transform: translateX(-50%); border-width: 0 6px 8px; border-style: solid; border-color: #f1f2f6 transparent; display: block; width: 0; }

.sub-tab-bar { display: flex; margin-bottom: 20px; background: #f1f2f6; border-radius: 12px; padding: 4px; }
.sub-tab { flex: 1; text-align: center; padding: 8px 0; font-size: 14px; color: #636e72; border-radius: 10px; cursor: pointer; transition: 0.2s; font-weight: 500; }
.sub-tab.active { background: white; color: var(--primary); font-weight: bold; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

.sub-content { display: none; animation: fadeIn 0.3s ease; }
.sub-content.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

/* ì°¨íŠ¸ ë³µêµ¬ */
.chart-wrapper { width: 100%; height: 280px; position: relative; margin-bottom: 10px; display: flex; justify-content: center; align-items: center; }

/* ì—…ì  (Patch v3.7 CSS ìˆ˜ì •) */
.achieve-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr); 
    gap: 10px; 
    padding: 10px 0;
}

.achieve-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding-top: 10px; 
    padding-bottom: 10px;
    position: relative;
    overflow: hidden;
    background: var(--card);
    border: 1px solid #eee;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.2s;
}

.achieve-item:active {
    transform: scale(0.98);
}

.achieve-icon {
    font-size: 28px;
    margin-bottom: 5px;
    display: block;
}

.achieve-title {
    font-size: 10px;
    font-weight: 600;
    color: #636e72;
    text-align: center;
    word-break: keep-all;
}

/* [ğŸ”¥ v3.7 í•µì‹¬ ìˆ˜ì •] ë¯¸íšë“ ì—…ì  ìŠ¤íƒ€ì¼ */
.achieve-item.locked {
    opacity: 0.6; /* ì „ì²´ ë¶ˆíˆ¬ëª…ë„ ì¡°ì • */
    border-color: #f1f2f6;
}

.achieve-item.locked .achieve-icon {
    /* ì´ëª¨ì§€ ìƒ‰ìƒì„ íšŒìƒ‰ìœ¼ë¡œ ë³´ì´ê²Œ í•˜ëŠ” CSS í•„í„° */
    filter: grayscale(100%) brightness(120%); 
}

.achieve-item.locked .achieve-title {
    color: #b2bec3; /* ì œëª©ë„ íšŒìƒ‰ìœ¼ë¡œ */
    font-weight: 500;
}
/* [ğŸ”¥ v3.7 í•µì‹¬ ìˆ˜ì • ë] */

/* í† ë„ˆë¨¼íŠ¸ */
.vote-wrapper { flex: 1; display: flex; flex-direction: column; justify-content: center; width: 100%; padding: 10px 0; }
.ticket-badge { font-size: 13px; font-weight: bold; color: #6c5ce7; background: #f0f3ff; padding: 5px 12px; border-radius: 20px; display: inline-block; margin-bottom: 5px; }
.round-badge { background: #2d3436; color: white; padding: 5px 15px; border-radius: 20px; font-size: 14px; font-weight: bold; display: inline-block; margin-bottom: 15px; }
#voteTitle { font-size: 20px; word-break: keep-all; line-height: 1.4; margin: 0 0 40px 0; }
.vs-container { display: flex; flex-direction: row; align-items: center; justify-content: center; gap: 10px; width: 100%; position: relative; }
.vs-card { flex: 1; height: 240px; padding: 15px 5px; border: 2px solid #dfe6e9; border-radius: 20px; text-align: center; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); background: white; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
.vs-card:active { border-color: var(--primary); background-color: #f0f3ff; transform: scale(0.96); }
.vs-avatar { width: 80px; height: 80px; background: #f1f2f6; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 40px; margin-bottom: 10px; box-shadow: inset 0 0 10px rgba(0,0,0,0.05); }
.vs-text-area { width: 100%; padding: 0 5px; box-sizing: border-box; }
.vs-name { font-size: 18px; font-weight: 800; margin-bottom: 5px; color: #2d3436; }
.vs-desc { font-size: 12px; color: #636e72; font-weight: 600; line-height: 1.3; word-break: keep-all; opacity: 0.8; }
.vs-divider-text { font-size: 28px; font-weight: 900; font-style: italic; color: #dfe6e9; text-shadow: 1px 1px 0px #fff; z-index: 10; margin: 0 2px; flex-shrink: 0; align-self: center; }

/* [ğŸ”¥ v4.6 ìˆ˜ì •] ìš°ìŠ¹ í™”ë©´ ê´€ë ¨ ìŠ¤íƒ€ì¼ (ìµœì¢… ì •ë ¬ ë° ê°„ê²©) */
.winner-box {
    text-align: center;
    /* [v4.6] ìƒë‹¨ ì—¬ë°±ì„ ì¤„ì—¬ì„œ ì•„ë°”íƒ€ë¥¼ ìœ„ë¡œ ì˜¬ë¦½ë‹ˆë‹¤. */
    padding: 10px 30px 30px 30px; 
    width: 100%; 
}

/* ìš°ìŠ¹ ì•„ë°”íƒ€ ìŠ¤íƒ€ì¼ */
.winner-avatar {
    width: 80px; 
    height: 80px;
    background: #fff; 
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 40px; 
    box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
    /* [v4.6] ì•„ë°”íƒ€ ì•„ë˜ ë§ˆì§„ ì œê±° (íƒ€ì´í‹€ê³¼ ë¶™ê²Œ) */
    margin-bottom: 0px; 
    border: 5px solid var(--primary); 
}

/* "ìš°ìŠ¹!" íƒ€ì´í‹€ê³¼ ì´ë¦„ ì‚¬ì´ ê°„ê²© ì¡°ì • */
#winnerTitle {
    /* [v4.6] ì•„ë°”íƒ€ì™€ 'ìš°ìŠ¹!' íƒ€ì´í‹€ ê°„ ê°„ê²© ìµœì†Œí™” (5px) */
    margin-top: 5px !important; 
    margin-bottom: 5px !important;
}
#winnerName {
    word-break: break-all; /* ë‹‰ë„¤ì„ì´ ê¸¸ì–´ì§€ë©´ ê°•ì œ ê°œí–‰ */
    line-height: 1.2;
    padding: 0 5px;
    margin-top: 0 !important; 
}


/* ë­í‚¹ */
.rank-header-area { margin-bottom: 15px; }
.rank-filter-row { display: flex; align-items: center; width: 100%; }
.stat-pills { flex: 1; display: flex; gap: 3px; overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; padding-bottom: 2px; }
.stat-pills::-webkit-scrollbar { display: none; }
.stat-pill { white-space: nowrap; padding: 6px 7px; border-radius: 12px; background: #f1f2f6; color: #636e72; font-size: 10.5px; font-weight: 600; cursor: pointer; border: 1px solid transparent; transition: 0.2s; flex-shrink: 1; }
.stat-pill.active { background: white; border-color: var(--primary); color: var(--primary); box-shadow: 0 2px 4px rgba(108, 92, 231, 0.15); font-weight: 700; }
.list-wrap { list-style: none; padding: 0; margin: 0; }

/* [ğŸ”¥ v3.3 ìˆ˜ì •: ë­í‚¹ ëª©ë¡ ìŠ¤íƒ€ì¼ ë³´ê°• ì‹œì‘] */
.list-item { 
    display: flex; /* Flexbox í™œì„±í™” */
    align-items: center; 
    padding: 15px 0; 
    border-bottom: 1px solid #eee; 
    width: 100%; 
    box-sizing: border-box; 
    /* ì´ì „ ìŠ¤íƒ€ì¼ê³¼ í†µí•© ë° ë³´ê°• */
}

/* ë­í‚¹ ë¦¬ìŠ¤íŠ¸ ì „ìš© ìŠ¤íƒ€ì¼ */
.list-item .rank-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #f0f2f6;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    margin-left: 10px;
}
/* [ğŸ”¥ v3.3 ìˆ˜ì • ë] */

.list-item > div:first-child { text-align: center; margin-right: 10px; font-weight: 900; }
.list-item > div:last-child { text-align: right; white-space: nowrap; }

/* ìƒì  & ì„¤ì • */
.shop-section { margin-bottom: 30px; }
.shop-title { font-size: 16px; font-weight: bold; color: #2d3436; margin-bottom: 10px; border-left: 4px solid var(--primary); padding-left: 10px; }
.shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.shop-item { background: white; border: 1px solid #eee; border-radius: 12px; padding: 15px; text-align: center; cursor: pointer; }
.shop-item:active { transform: scale(0.98); }
.shop-item-img { font-size: 30px; margin-bottom: 5px; }
.shop-item-name { font-size: 14px; font-weight: bold; margin-bottom: 5px; }
.shop-item-price { font-size: 12px; color: var(--primary); font-weight: bold; }
.cash-price { color: #00b894; }

.settings-profile { display: flex; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #f1f2f6; }
.st-avatar { width: 60px; height: 60px; border-radius: 50%; background: #fff0f6; display: flex; justify-content: center; align-items: center; font-size: 30px; margin-right: 15px; }
.st-info { flex: 1; }
.st-name { font-size: 18px; font-weight: 800; color: #2d3436; }
.st-account { font-size: 12px; color: #b2bec3; margin-top: 4px; }
.settings-msg-box { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 20px; position: relative; }
.st-msg-label { font-size: 12px; color: var(--primary); font-weight: bold; margin-bottom: 5px; display: block; }
.st-msg-text { font-size: 14px; color: #2d3436; line-height: 1.4; }
.st-msg-edit { position: absolute; top: 15px; right: 15px; color: #b2bec3; cursor: pointer; }
.settings-menu { list-style: none; padding: 0; margin: 0 0 30px 0; }
.st-menu-item { padding: 15px 0; border-bottom: 1px solid #f1f2f6; display: flex; justify-content: space-between; cursor: pointer; font-size: 15px; color: #2d3436; }


/* ========================================
    ë°”í…€ ì‹œíŠ¸ (Patch v4.4 - ìœ„ì¹˜ ë° Z-Index ê°•ì œ ê³ ì •)
======================================== */
.sheet-overlay {
    position: fixed !important; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: none;
    z-index: 10000 !important; 
    touch-action: none;
}

.sheet-overlay.open { display: block; }

/* í•˜ì–€ìƒ‰ íŒì—…ì°½ (Sheet) */
.bottom-sheet {
    position: fixed !important; 
    bottom: -100%; 
    left: 0; 
    right: 0;
    margin: 0 auto;
    max-width: 420px;
    width: 100%;
    background: white;
    border-radius: 20px 20px 0 0;
    padding: 30px 20px;
    box-sizing: border-box;
    transition: bottom 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
    z-index: 10001 !important; 
    max-height: 80vh; 
    overflow-y: auto; 
    box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
}

/* íŒì—… ì—´ë¦´ ë•Œ ì• ë‹ˆë©”ì´ì…˜ */
.sheet-overlay.open .bottom-sheet { 
    bottom: 0 !important; 
}

/* íŒì—… ë‚´ë¶€ ìš”ì†ŒëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ */
.sheet-icon { font-size: 50px; margin-bottom: 15px; }
.sheet-title { font-size: 20px; font-weight: bold; margin-bottom: 10px; color: #2d3436; }
.sheet-desc { font-size: 14px; color: #636e72; margin-bottom: 30px; line-height: 1.5; }