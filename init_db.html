<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DB ì´ˆê¸°í™” ë„êµ¬</title>
</head>
<body>
    <h1>It's me! ë°ì´í„° ì´ˆê¸°í™” ë„êµ¬</h1>
    <p>ì´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„œë²„ì— [ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸]ì™€ [NPC ì¹œêµ¬ë“¤]ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
    <button onclick="initDB()" style="padding:20px; font-size:20px; background:#6c5ce7; color:white; border:none; border-radius:10px; cursor:pointer;">ë°ì´í„° ì‹¬ê¸° (Initialize)</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, writeBatch, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // [ì¤‘ìš”] ì„ ë°°ë‹˜ì˜ API KEYë¥¼ ì—¬ê¸°ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!
        const firebaseConfig = {
            apiKey: "AIzaSyCZJB72jkS2rMgM213Wu9fEuW4Q4jN1scc",
            authDomain: "it-s-me-96d66.firebaseapp.com",
            projectId: "it-s-me-96d66",
            storageBucket: "it-s-me-96d66.firebasestorage.app",
            messagingSenderId: "950221311348",
            appId: "1:950221311348:web:43c851b6a4d7446966f021",
            measurementId: "G-J3SYEX4SYW"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.initDB = async function() {
            if(!confirm("ì •ë§ DBì— ë°ì´í„°ë¥¼ ë°€ì–´ë„£ìœ¼ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

            const batch = writeBatch(db);

            // 1. ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ (Questions)
            // type: ì–´ë–¤ ìŠ¤íƒ¯ì„ ì˜¬ë ¤ì¤„ì§€ ê²°ì • (0:ì¼ë¨¸ë¦¬, 1:ìœ ë¨¸, 2:ì˜ë¦¬, 3:ì„¼ìŠ¤, 4:ë§¤ë ¥, 5:ê´‘ê¸°)
            const questions = [
                { text: "ì—…ë¬´ ì²˜ë¦¬ê°€ ë” ê¹”ë”í•œ ì‚¬ëŒì€?", type: 0 },
                { text: "ê°™ì´ í”„ë¡œì íŠ¸ í•˜ë©´ ë“ ë“ í•  ê²ƒ ê°™ì€ ì‚¬ëŒì€?", type: 0 },
                { text: "íšŒì‹ ìë¦¬ì—ì„œ ë¶„ìœ„ê¸° ì˜ ë„ìš°ëŠ” ì‚¬ëŒì€?", type: 1 },
                { text: "ë‹¨í†¡ë°©ì—ì„œ ë“œë¦½ë ¥ì´ ë” ì¢‹ì€ ì‚¬ëŒì€?", type: 1 },
                { text: "ë‚´ ë¹„ë°€ì„ ë¬´ë¤ê¹Œì§€ ê°€ì ¸ê°ˆ ì‚¬ëŒì€?", type: 2 },
                { text: "ìƒˆë²½ì— ì „í™”í•´ë„ ë°›ì•„ì¤„ ê²ƒ ê°™ì€ ì‚¬ëŒì€?", type: 2 },
                { text: "ëˆˆì¹˜ê°€ ë¹¨ë¼ì„œ ìƒí™© íŒŒì•… ì˜í•˜ëŠ” ì‚¬ëŒì€?", type: 3 },
                { text: "ì„¼ìŠ¤ ìˆëŠ” ì„ ë¬¼ì„ ì˜ ê³ ë¥¼ ê²ƒ ê°™ì€ ì‚¬ëŒì€?", type: 3 },
                { text: "ì¸ê°„ì ìœ¼ë¡œ ë” ëŒë¦¬ëŠ” ì‚¬ëŒì€?", type: 4 },
                { text: "ì†Œê°œíŒ… ì‹œì¼œì£¼ê³  ì‹¶ì€ ì‚¬ëŒì€?", type: 4 },
                { text: "ê°€ë” ëŒì•„ì´ ê°™ì§€ë§Œ ë§¤ë ¥ ìˆëŠ” ì‚¬ëŒì€?", type: 5 },
                { text: "ìˆ  ë§ˆì‹œë©´ í…ì…˜ì´ ìš°ì£¼ë¡œ ê°€ëŠ” ì‚¬ëŒì€?", type: 5 }
            ];

            // 2. NPC ì¹œêµ¬ë“¤ (Users)
            const npcs = [
                { nickname: "ê¹€ ëŒ€ë¦¬", avatar: "ğŸ§‘â€ğŸ’»", desc: "#ê¼¼ê¼¼ #ì„±ì‹¤", group: "company" },
                { nickname: "ì´ ê³¼ì¥", avatar: "ğŸ˜", desc: "#ë¦¬ë”ì‹­ #ì¶”ì§„ë ¥", group: "company" },
                { nickname: "ë°• ì‚¬ì›", avatar: "ğŸ°", desc: "#ë¶„ìœ„ê¸°ë©”ì´ì»¤", group: "company" },
                { nickname: "ìµœ ì‹ ì…", avatar: "ğŸ¥", desc: "#ì—´ì • #ë°°ì›€", group: "company" },
                { nickname: "ê°• íŒ€ì¥", avatar: "ğŸ¦", desc: "#ì¹´ë¦¬ìŠ¤ë§ˆ", group: "company" }
            ];

            try {
                // ì§ˆë¬¸ ë„£ê¸°
                for (const q of questions) {
                    await addDoc(collection(db, "questions"), q);
                }
                console.log("ì§ˆë¬¸ ë“±ë¡ ì™„ë£Œ");

                // NPC ë„£ê¸°
                for (const npc of npcs) {
                    await addDoc(collection(db, "users"), {
                        ...npc,
                        isNPC: true, // NPC í‘œì‹œ
                        stats: [50, 50, 50, 50, 50, 50] // ê¸°ë³¸ ì ìˆ˜
                    });
                }
                console.log("NPC ë“±ë¡ ì™„ë£Œ");

                alert("ë°ì´í„° ì‹¬ê¸° ì„±ê³µ! ì´ì œ ì•±ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");

            } catch (e) {
                console.error(e);
                alert("ì—ëŸ¬ ë°œìƒ! (ì½˜ì†” í™•ì¸ í•„ìš”)");
            }
        }
    </script>
</body>
</html>